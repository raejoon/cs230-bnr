file <- "10.json"
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
as_tibble()
library(jsonlite)
library(magrittr)
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
as_tibble()
ast <-
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
as_tibble()
ast
ast$children %>%
as_tibble()
ast$type == "program" | ast$children$type == "statementList"
ast$type == "program" & ast$children$type == "statementList"
ast$children
ast$type == "program"
ast
ast$children %>% as_tibble()
ast
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
as_tibble() %>%
tibble()
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
tibble()
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
as_tibble()
ast_core <- ast$children %>% as_tibble()
ast_core
ast_core
!"children" %in% names(ast_core)
ast_core$children <- NULL
ast_core
source('~/Desktop/cs230-bnr/functions.R', echo=TRUE)
ast_core$children <- NA
ast_core
ast_core
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
as_tibble()
library(jsonlite)
library(magrittr)
here::here("data-raw", "hoc4", "trajectories")
folder_path <- here::here("data-raw", "hoc4", "trajectories")
folder_path
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
)
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>% slice(1:10) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt")), warn = FALSE)
)
get_traj <- function(folder_path){
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>% slice(1:10) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt"), warn = FALSE))
)
}
get_traj <- function(folder_path){
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt"), warn = FALSE))
)
}
get_traj <- function(folder_path){
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>%
slice(1:10) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt"), warn = FALSE))
)
}
folder_path <- here::here("data-raw", "hoc4", "trajectories")
traj_4 <- get_traj(here::here("data-raw", "hoc4", "trajectories"))
traj_4
getwd()
dir.create("/data-created")
dir.create("/data-created")
getwd()
glue::glue("{getwd()}")
glue::glue("{getwd()}/data-created")
glue::glue("{getwd()}/data-created") %>% dir.create()
?glue::glue
trees_4
# problem 4 ---------------------------------------------------------------
trees_4 <-
tibble(
file = list.files(here::here("data-raw", "hoc4", "asts")) %>% str_subset(".json$")
) %>%
mutate(
astId = str_extract(file, "^\\d+") %>% as.numeric(),
tree = file %>% map(parse_ast_4),
steps = map_int(tree, ~ nrow(.))
) %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "counts.txt")), by = "astId") %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "unitTestResults.txt")), by = "astId") %>%
arrange(desc(counts), desc(score)) %>%
select(-file)
library(jsonlite)
library(magrittr)
parse_ast_4 <- function(file){
print(file)
ast <-
file %>%
here::here("data-raw", "hoc4", "asts", .) %>%
fromJSON() %>%
extract2("children") %>%
as_tibble()
if("children" %in% names(ast)){
ast_new <-
ast %>%
pull(children) %>%
extract2(1) %>%
as_tibble()
if(!"children" %in% names(ast_new)){
ast_new$children <- NA
}
out <-
ast_new %>%
mutate(
type =
map2_chr(
type,
children,
~ifelse(.x == "maze_turn", .y$type, .x)
)
) %>%
select(id, type)
} else {
out <- ast %>% as_tibble()
}
if(!all(out$type %in% c("maze_moveForward", "turnLeft", "turnRight"))){
stop("unrecognized type")
}
out
}
parse_ast_18 <- function(file){
print(file)
file %>%
here::here("data-raw", "hoc18", "asts", .) %>%
fromJSON() %>%
extract2("children") %>%
as_tibble()
}
get_traj <- function(folder_path){
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>%
slice(1:10) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt"), warn = FALSE))
)
}
# problem 4 ---------------------------------------------------------------
trees_4 <-
tibble(
file = list.files(here::here("data-raw", "hoc4", "asts")) %>% str_subset(".json$")
) %>%
mutate(
astId = str_extract(file, "^\\d+") %>% as.numeric(),
tree = file %>% map(parse_ast_4),
steps = map_int(tree, ~ nrow(.))
) %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "counts.txt")), by = "astId") %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "unitTestResults.txt")), by = "astId") %>%
arrange(desc(counts), desc(score)) %>%
select(-file)
trees_4 <-
tibble(
file = list.files(here::here("data-raw", "hoc4", "asts")) %>% str_subset(".json$")
) %>%
mutate(
astId = str_extract(file, "^\\d+") %>% as.numeric(),
tree = file %>% map(parse_ast_4),
steps = map_int(tree, ~ nrow(.))
) %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "counts.txt")), by = "astId") %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "unitTestResults.txt")), by = "astId") %>%
arrange(desc(counts), desc(score)) %>%
select(-file)
traj_4 <- get_traj(here::here("data-raw", "hoc4", "trajectories"))
source("functions.R")
library(jsonlite)
library(magrittr)
source("functions.R")
# problem 4 ---------------------------------------------------------------
trees_4 <-
tibble(
file = list.files(here::here("data-raw", "hoc4", "asts")) %>% str_subset(".json$")
) %>%
mutate(
astId = str_extract(file, "^\\d+") %>% as.numeric(),
tree = file %>% map(parse_ast_4),
steps = map_int(tree, ~ nrow(.))
) %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "counts.txt")), by = "astId") %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "unitTestResults.txt")), by = "astId") %>%
arrange(desc(counts), desc(score)) %>%
select(-file)
library(tidyverse)
library(magrittr)
library(jsonlite)
source("functions.R")
# problem 4 ---------------------------------------------------------------
trees_4 <-
tibble(
file = list.files(here::here("data-raw", "hoc4", "asts")) %>% str_subset(".json$")
) %>%
mutate(
astId = str_extract(file, "^\\d+") %>% as.numeric(),
tree = file %>% map(parse_ast_4),
steps = map_int(tree, ~ nrow(.))
) %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "counts.txt")), by = "astId") %>%
left_join(read_tsv(here::here("data-raw", "hoc4", "asts", "unitTestResults.txt")), by = "astId") %>%
arrange(desc(counts), desc(score)) %>%
select(-file)
traj_4
traj_4 <- get_traj(here::here("data-raw", "hoc4", "trajectories"))
traj_4
get_traj <- function(folder_path){
tibble(
trajId = list.files(folder_path) %>% str_subset(".txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt"), warn = FALSE))
)
}
traj_4 <- get_traj(here::here("data-raw", "hoc4", "trajectories"))
get_traj <- function(folder_path){
tibble(
trajId = list.files(folder_path) %>% str_subset("^\\d+.txt$") %>% str_extract("^\\d+") %>% as.numeric()
) %>%
mutate(
astIds = trajId %>% map(~ readLines(paste0(folder_path, "/", ., ".txt"), warn = FALSE))
)
}
traj_4 <- get_traj(here::here("data-raw", "hoc4", "trajectories"))
traj_4
